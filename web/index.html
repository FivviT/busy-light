<!DOCTYPE html>
<html>

<head>
    <!-- Specify character encoding -->
    <meta charset="UTF-8">
    <!-- Import Materialize CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
</head>

<style>
    .switch {
        margin: 15px 0;
    }
</style>
<body class="grey lighten-4">
    <div class="container">
        <div class="row">
            <div class="col s12 m6 l4">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">Light Control</span>
                        <div class="row">
                            <div class="col s6">
                                <form action="./change_color" method="post">
                                    <div class="input-field">
                                        <input type="color" id="color" name="color" value="{color}" onchange="form.submit()" class="browser-default">
                                    </div>
                                </form>
                            </div>
                            <div class="col s6">
                                <form action="./lighton" id="light-form">
                                    <div class="switch">
                                        <label>
                                            Off
                                            <input type="checkbox" id="light-switch" onchange="toggleLight()" {state}>
                                            <span class="lever"></span>
                                            On
                                        </label>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col s12 m6 l4">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">WI-FI Settings</span>
                        <form action="./change_wifi" method="post">
                            <div class="input-field">
                                <input type="text" id="ssid" name="ssid" placeholder="SSID" value="{ssid}" required>
                                <label for="ssid" class="active">SSID</label>
                            </div>
                            <div class="input-field">
                                <input type="password" id="password" name="password" placeholder="Password"
                                    value="{password}" required>
                                <label for="password" class="active">Password</label>
                            </div>
                            <button type="submit" class="btn waves-effect waves-light blue darken-1">Save</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col s12 m6 l4">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">Advanced Settings</span>
                        <p>CPU Temperature: {temperature} Â°C</p>
                        <form action="./change_leds_count" method="post">
                            <div class="input-field">
                                <input type="number" id="leds_count" name="leds_count" placeholder="LEDs Count"
                                    value="{leds}" required>
                                <label for="leds_count" class="active">LEDs Count</label>
                            </div>
                            <button type="submit" class="btn waves-effect waves-light blue darken-1">Save</button>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script>
        function toggleLight() {
            const form = document.getElementById('light-form');
            const switchElement = document.getElementById('light-switch');
            if (switchElement.checked) {
                form.action = './lighton';
            } else {
                form.action = './lightoff';
            }
            form.submit();
        }
    </script>
    <style>
        .switch label input[type=checkbox]:checked+.lever {
            background-color: #1e88e5;
        }

        .switch label input[type=checkbox]:checked+.lever:before {
            border-color: #1e88e5;
        }

        .switch label input[type=checkbox]:checked+.lever:after {
            background-color: #1e88e5;
        }
    </style>
</body>

</html>